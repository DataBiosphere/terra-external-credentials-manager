jacocoTestReport {
	reports {
		html.required = true
		xml.required = true
	}

	dependsOn test

	// https://www.baeldung.com/jacoco-report-exclude#2-gradle-configuration
	afterEvaluate {
		classDirectories.setFrom(files(classDirectories.files.collect {
			fileTree(dir: it, exclude: ['bio/terra/externalcreds/generated/**'])
		}))
	}
}
